new entry "Interrupt_SneakAttack"
type "InterruptData"
data "DisplayName" "hd8a8ad84g4f65g46fdgb04dg5b91daf7f291;1"
data "Description" "h23701712ge994g40bfga729g36dc38dc7c65;2"
data "ExtraDescription" "h76d95144gbf2eg4c33gae0bg9661d52519e1;1"
data "Icon" "Action_SneakAttack_Melee"
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "Self(context.Source,context.Observer) and HasDamageEffectFlag(DamageFlags.Hit) and ConditionResult(context.HitDescription.FirstAttack) and ((WieldingFinesseWeaponInSpecificHand(context.Observer,false) and IsMainHandAttack()) or (WieldingFinesseWeaponInSpecificHand(context.Observer,true) and IsOffHandAttack()) or (IsMeleeWeaponAttack() and SpellTypeIs(SpellType.Throw) and HasWeaponProperty(WeaponProperties.Finesse, context.HitDescription.ThrownObject)) or (WieldingWeapon('Ammunition', false, true, context.Observer) and IsRangedAttack())) and not IsCritical() and (HasDamageEffectFlag(DamageFlags.AttackAdvantage) or HasAllyWithinRange('SG_Incapacitated',1.5)) and not HasDamageEffectFlag(DamageFlags.AttackDisadvantage) and not (SpellId('Projectile_SneakAttack') or SpellId('Target_SneakAttack')) and not AnyEntityIsItem()"
data "Properties" "IF(IsMeleeAttack()):DealDamage(LevelMapValue(SneakAttack), MainMeleeWeaponDamageType);IF(IsRangedAttack()):DealDamage(LevelMapValue(SneakAttack), MainRangedWeaponDamageType);IF(HasPassive('MAG_ForcefulSneakAttack_Passive', context.Source)):DealDamage(1d4, Force)"
data "Cost" "SneakAttack_Charge:1"
data "Stack" "SneakAttack"
data "Cooldown" "OncePerTurn"
data "InterruptDefaultValue" "Enabled"
data "EnableCondition" "HasActionResource('SneakAttack_Charge',1,0,false,false,context.Source) and (WieldingFinesseWeaponInSpecificHand(context.Source, false) or WieldingFinesseWeaponInSpecificHand(context.Source, true) or WieldingWeapon('Ammunition', false, true, context.Source) or SpellTypeIs(SpellType.Throw)) and (not HasStatus('SG_Polymorph') or Tagged('MINDFLAYER'))"
data "EnableContext" "OnActionResourcesChanged;OnEquip"

new entry "Interrupt_SneakAttack_Critical"
type "InterruptData"
using "Interrupt_SneakAttack"
data "DisplayName" "haf81f97cgee6ag46cbg8749g814ddcccccec;1"
data "Conditions" "Self(context.Source,context.Observer) and HasDamageEffectFlag(DamageFlags.Hit) and ConditionResult(context.HitDescription.FirstAttack) and ((WieldingFinesseWeaponInSpecificHand(context.Observer,false) and IsMainHandAttack()) or (WieldingFinesseWeaponInSpecificHand(context.Observer,true) and IsOffHandAttack()) or (IsMeleeWeaponAttack() and SpellTypeIs(SpellType.Throw) and HasWeaponProperty(WeaponProperties.Finesse, context.HitDescription.ThrownObject)) or (WieldingWeapon('Ammunition', false, true, context.Observer) and IsRangedAttack())) and IsCritical() and (HasDamageEffectFlag(DamageFlags.AttackAdvantage) or HasAllyWithinRange('SG_Incapacitated',1.5)) and not HasDamageEffectFlag(DamageFlags.AttackDisadvantage) and not (SpellId('Projectile_SneakAttack') or SpellId('Target_SneakAttack')) and not AnyEntityIsItem()"
data "InterruptDefaultValue" "Enabled"

new entry "Interrupt_RecklessAttack"
type "InterruptData"
data "DisplayName" "h701c1f32g4fccg44f3gafdbgdf0638885c02;1"
data "Description" "h132e19c7gfdc7g41a4g9cd5ga1bd1106e5e7;1"
data "Icon" "Action_Barbarian_RecklessAttack"
data "InterruptContext" "OnPostRoll"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "not Dead(context.Observer) and HasInterruptedAttack() and Self(context.Observer,context.Source) and IsMeleeWeaponAttack() and not HasStatus('RECKLESS_ATTACK',context.Observer) and not SpellId('Target_RecklessAttack') and not AnyEntityIsItem() and not HasStatus('RAW_RECKLESS_ATTACK_BLOCK',context.Observer)"
data "Properties" "SetAdvantage();ApplyStatus(OBSERVER_OBSERVER,RECKLESS_ATTACK,100,1);ApplyStatus(OBSERVER_OBSERVER,RAW_RECKLESS_ATTACK_SELF,100,1)"
data "Cooldown" "OncePerTurn"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph') or Tagged('MINDFLAYER')"
data "EnableContext" "OnStatusApplied"
