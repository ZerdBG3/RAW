new entry "ShortResting"
type "PassiveData"
data "Properties" "IsHidden"
data "StatsFunctors" "ApplyStatus(SELF,DND_SHORT_REST,100,-1);"
data "StatsFunctorContext" "OnShortRest"

new entry "DnD_Walk"
type "PassiveData"
data "DisplayName" "DnD_Passive_Walk_DisplayName"
data "Description" "DnD_Passive_Walk_Description"
data "ExtraDescription" "DnD_Passive_Walk_ExtraDescription"
data "Icon" "Status_Restrained"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar"
data "ToggleOnFunctors" "ApplyStatus(DND_WALKING,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(DND_WALKING)"

new entry "WeaponThrow"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(SpellTypeIs(SpellType.Throw) and (SpellId('Throw_Javelin') or SpellId('Throw_Javelin_OffHand') or SpellId('Throw_Javelin_OffHand_Transition')) and DistanceToTargetGreaterThan(9)):Disadvantage(AttackRoll);IF(SpellTypeIs(SpellType.Throw) and not SpellId('Throw_Javelin') and not SpellId('Throw_Javelin_OffHand') and not SpellId('Throw_Javelin_OffHand_Transition') and DistanceToTargetGreaterThan(6)):Disadvantage(AttackRoll)"
data "StatsFunctorContext" "OnAttack"

new entry "HuntersMark"
type "PassiveData"
data "DisplayName" "Shared_Passive_HuntersMark_DisplayName"
data "Description" "Shared_Passive_HuntersMark_Description"
data "DescriptionParams" "DealDamage(1d6,MainMeleeWeaponDamageType)"
data "Icon" "PassiveFeature_HuntersMark"
data "PriorityOrder" "2"
data "Properties" "Highlighted"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "HasStatus('HUNTERS_MARK',context.Target,context.Source) and IsWeaponAttack() and HasDamageEffectFlag(DamageFlags.Hit) and TotalAttackDamageDoneGreaterThan(0)"
data "StatsFunctors" "ApplyStatus(PASSIVE_HUNTERS_MARK,100,0);IF(IsAttackType(AttackType.MeleeWeaponAttack)):DealDamage(1d6, MainMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedWeaponAttack)):DealDamage(1d6, MainRangedWeaponDamageType);IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack)):DealDamage(1d6, OffhandMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedOffHandWeaponAttack)):DealDamage(1d6, OffhandRangedWeaponDamageType);"

new entry "ColossusSlayer"
type "PassiveData"
data "DisplayName" "Shared_Passive_ColossusSlayer_DisplayName"
data "Description" "Shared_Passive_ColossusSlayer_Description"
data "Icon" "PassiveFeature_ColossusSlayer"
data "Properties" "OncePerTurn;Highlighted"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "IsWeaponAttack() and HasDamageEffectFlag(DamageFlags.Hit) and not HasMaxHP()"
data "StatsFunctors" "IF(IsAttackType(AttackType.MeleeWeaponAttack)):DealDamage(1d8, MainMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedWeaponAttack)):DealDamage(1d8, MainRangedWeaponDamageType);IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack)):DealDamage(1d8, OffhandMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedOffHandWeaponAttack)):DealDamage(1d8, OffhandRangedWeaponDamageType);"

new entry "SneakAttack"
type "PassiveData"
data "DisplayName" "DnD_Passive_SneakAttack_DisplayName"
data "Description" "DnD_Passive_SneakAttack_Description"
data "DescriptionParams" "DealDamage(1d6,Piercing)"
data "Icon" "Action_SneakAttack_Melee"
data "Conditions" "((IsRangedAttack() and IsWeaponAttack()) or (HasWeaponProperty(WeaponProperties.Finesse, GetAttackWeapon()) and not SpellTypeIs(SpellType.Throw)) or SpellId('Throw_Finesse') or SpellId('Throw_Finesse_OffHand') or SpellId('Throw_Finesse_OffHand_Transition')) and (HasAdvantage() or (HasAllyWithinRange('SG_Incapacitated',3) and not HasDisadvantage())) and HasDamageEffectFlag(DamageFlags.Hit) and HasActionResource('SneakAttack',1,0,false,context.Source)"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar;Highlighted"
data "StatsFunctors" "UseActionResource(SELF,SneakAttack,1);DealDamage(1d6, Piercing);"
data "StatsFunctorContext" "OnAttack"

new entry "SneakAttack_2"
type "PassiveData"
data "DisplayName" "DnD_Passive_SneakAttack_DisplayName"
data "Description" "DnD_Passive_SneakAttack_Description"
data "DescriptionParams" "DealDamage(2d6,Piercing)"
data "Icon" "Action_SneakAttack_Melee"
data "Conditions" "((IsRangedAttack() and IsWeaponAttack()) or (HasWeaponProperty(WeaponProperties.Finesse, GetAttackWeapon()) and not SpellTypeIs(SpellType.Throw)) or SpellId('Throw_Finesse') or SpellId('Throw_Finesse_OffHand') or SpellId('Throw_Finesse_OffHand_Transition')) and (HasAdvantage() or (HasAllyWithinRange('SG_Incapacitated',3) and not HasDisadvantage())) and HasDamageEffectFlag(DamageFlags.Hit) and HasActionResource('SneakAttack',1,0,false,context.Source)"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar;Highlighted"
data "StatsFunctors" "UseActionResource(SELF,SneakAttack,1);DealDamage(2d6, Piercing);"
data "StatsFunctorContext" "OnAttack"

new entry "SneakAttack_3"
type "PassiveData"
data "DisplayName" "DnD_Passive_SneakAttack_DisplayName"
data "Description" "DnD_Passive_SneakAttack_Description"
data "DescriptionParams" "DealDamage(3d6,Piercing)"
data "Icon" "Action_SneakAttack_Melee"
data "Conditions" "((IsRangedAttack() and IsWeaponAttack()) or (HasWeaponProperty(WeaponProperties.Finesse, GetAttackWeapon()) and not SpellTypeIs(SpellType.Throw)) or SpellId('Throw_Finesse') or SpellId('Throw_Finesse_OffHand') or SpellId('Throw_Finesse_OffHand_Transition')) and (HasAdvantage() or (HasAllyWithinRange('SG_Incapacitated',3) and not HasDisadvantage())) and HasDamageEffectFlag(DamageFlags.Hit) and HasActionResource('SneakAttack',1,0,false,context.Source)"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar;Highlighted"
data "StatsFunctors" "UseActionResource(SELF,SneakAttack,1);DealDamage(3d6, Piercing);"
data "StatsFunctorContext" "OnAttack"

new entry "ArcaneWard"
type "PassiveData"
data "DisplayName" "Shared_Passive_ArcaneWard_DisplayName"
data "Description" "Shared_Passive_ArcaneWard_Description"
data "DescriptionParams" "RegainHitPoints(2*Level+IntelligenceModifier)"
data "Icon" "PassiveFeature_ArcaneWard"
data "PriorityOrder" "2"
data "Properties" "Highlighted"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "IsSpellSchool(SpellSchool.Abjuration) and not IsCantrip()"
data "StatsFunctors" "IF(HasStatus('ARCANE_WARD_HELPER',context.Source) and SpellPowerLevelEqualTo(1)):ApplyStatus(SELF,ARCANE_WARD_REPLENISH_1,100,-1);IF(HasStatus('ARCANE_WARD_HELPER',context.Source) and SpellPowerLevelEqualTo(2)):ApplyStatus(SELF,ARCANE_WARD_REPLENISH_2,100,-1);IF(HasStatus('ARCANE_WARD_HELPER',context.Source) and SpellPowerLevelEqualTo(3)):ApplyStatus(SELF,ARCANE_WARD_REPLENISH_3,100,-1);IF(not HasStatus('ARCANE_WARD_HELPER',context.Source)):ApplyStatus(SELF,ARCANE_WARD,100,-1)"

new entry "FastHands"
type "PassiveData"
data "DisplayName" "Shared_Passive_FastHands_DisplayName"
data "Description" "Shared_Passive_FastHands_Description"
data "Icon" "PassiveFeature_FastHands"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_Help_CunningAction);UnlockSpell(Target_Distract_CunningAction);UnlockSpell(Throw_Throw_CunningAction)"

new entry "SecondStoryWork"
type "PassiveData"
data "DisplayName" "Shared_Passive_SecondStoryWork_DisplayName"
data "Description" "Shared_Passive_SecondStoryWork_Description"
data "Icon" "PassiveFeature_SecondStoryWork_Falling"
data "Properties" "Highlighted"
data "Boosts" "FallDamageMultiplier(0.5);UnlockSpell(Projectile_Jump_Thief)"

new entry "SearingSmite"
type "PassiveData"
data "DisplayName" "DnD_Passive_SearingSmite_DisplayName"
data "Description" "DnD_Passive_SearingSmite_Description"
data "DescriptionParams" "DealDamage(1d6,Fire)"
data "Conditions" "(IsAttackType(AttackType.MeleeWeaponAttack) or IsAttackType(AttackType.MeleeOffHandWeaponAttack)) and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "DealDamage(1d6,Fire);RemoveStatus(SELF,SEARING_SMITE_INITIAL);ApplyStatus(SEARING_SMITE,100,10)"
data "StatsFunctorContext" "OnAttack"
data "Properties" "IsHidden"

new entry "SearingSmite_2"
type "PassiveData"
data "DisplayName" "DnD_Passive_SearingSmite_DisplayName"
data "Description" "DnD_Passive_SearingSmite_Description"
data "DescriptionParams" "DealDamage(1d6,Fire)"
data "Conditions" "(IsAttackType(AttackType.MeleeWeaponAttack) or IsAttackType(AttackType.MeleeOffHandWeaponAttack)) and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "DealDamage(2d6,Fire);RemoveStatus(SELF,SEARING_SMITE_INITIAL_2);ApplyStatus(SEARING_SMITE,100,10)"
data "StatsFunctorContext" "OnAttack"
data "Properties" "IsHidden"

new entry "SearingSmite_3"
type "PassiveData"
data "DisplayName" "DnD_Passive_SearingSmite_DisplayName"
data "Description" "DnD_Passive_SearingSmite_Description"
data "DescriptionParams" "DealDamage(1d6,Fire)"
data "Conditions" "(IsAttackType(AttackType.MeleeWeaponAttack) or IsAttackType(AttackType.MeleeOffHandWeaponAttack)) and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "DealDamage(3d6,Fire);RemoveStatus(SELF,SEARING_SMITE_INITIAL_3);ApplyStatus(SEARING_SMITE,100,10)"
data "StatsFunctorContext" "OnAttack"
data "Properties" "IsHidden"

new entry "ShieldMaster_Shove"
type "PassiveData"
data "DisplayName" "Shared_Passive_ShieldMaster_Shove_DisplayName"
data "Description" "Shared_Passive_ShieldMaster_Shove_Description"
data "Icon" "PassiveFeature_ShieldMaster_Block"
data "Properties" "Highlighted"
data "Conditions" "(IsWeaponAttack() or IsUnarmedAttack()) and HasShieldEquipped(context.Source) and HasStatus('DND_CURRENT_TURN', context.Source)"
data "StatsFunctors" "ApplyStatus(SELF,DND_SHIELD_MASTER_SHOVE,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Rage_Rage_Boosts"
type "PassiveData"
data "DisplayName" "Shared_Passive_Rage_Rage_Boosts_DisplayName"
data "Description" "Shared_Passive_Rage_Rage_Boosts_Description"
data "Properties" "IsHidden"
data "BoostContext" "OnEquip;OnCreate"
data "BoostConditions" "not HasHeavyArmor(context.Source)"
data "Boosts" "Advantage(Ability, Strength); Advantage(SavingThrow, Strength); Resistance(Slashing, Resistant); Resistance(Piercing, Resistant); Resistance(Bludgeoning, Resistant);IF(WeaponAttackRollAbility(Ability.Strength) and IsMeleeAttack() and HasDamageEffectFlag(DamageFlags.Hit)): CharacterWeaponDamage(2);"

new entry "TotemSpirit_Bear"
type "PassiveData"
data "DisplayName" "Shared_Passive_TotemSpirit_Bear_DisplayName"
data "Description" "Shared_Passive_TotemSpirit_Bear_Description"
data "Icon" "Action_Barbarian_Rage_BearTotem"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_Rage_Totem_Bear)"

new entry "TotemSpirit_Bear_Rage_Boosts"
type "PassiveData"
data "DisplayName" "Shared_Passive_TotemSpirit_Bear_Rage_Boosts_DisplayName"
data "Description" "Shared_Passive_TotemSpirit_Bear_Rage_Boosts_Description"
data "Properties" "IsHidden"
data "BoostContext" "OnEquip;OnCreate"
data "BoostConditions" "not HasHeavyArmor(context.Source)"
data "Boosts" "Advantage(Ability, Strength); Advantage(SavingThrow, Strength); IF(WeaponAttackRollAbility(Ability.Strength) and IsMeleeAttack() and HasDamageEffectFlag(DamageFlags.Hit)): CharacterWeaponDamage(2);"

new entry "TotemSpirit_Eagle"
type "PassiveData"
data "DisplayName" "Shared_Passive_TotemSpirit_Eagle_DisplayName"
data "Description" "Shared_Passive_TotemSpirit_Eagle_Description"
data "Icon" "Action_Barbarian_Rage_EagleTotem"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_Rage_Totem_Eagle)"

new entry "TotemSpirit_Eagle_Rage_Boosts"
type "PassiveData"
data "DisplayName" "Shared_Passive_TotemSpirit_Eagle_Rage_Boosts_DisplayName"
data "Description" "Shared_Passive_TotemSpirit_Eagle_Rage_Boosts_Description"
data "Properties" "IsHidden"
data "BoostContext" "OnEquip;OnCreate"
data "BoostConditions" "not HasHeavyArmor(context.Source)"
data "Boosts" "Advantage(Ability, Strength); Advantage(SavingThrow, Strength); Resistance(Slashing, Resistant); Resistance(Piercing, Resistant); Resistance(Bludgeoning, Resistant); IF(WeaponAttackRollAbility(Ability.Strength) and IsMeleeAttack() and HasDamageEffectFlag(DamageFlags.Hit)): CharacterWeaponDamage(2);"

new entry "TotemSpirit_Elk"
type "PassiveData"
data "DisplayName" "Shared_Passive_TotemSpirit_Elk_DisplayName"
data "Description" "Shared_Passive_TotemSpirit_Elk_Description"
data "DescriptionParams" "Distance(4.5)"
data "Icon" "Action_Barbarian_Rage_ElkTotem"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_Rage_Totem_Elk)"

new entry "TotemSpirit_Elk_Rage_Boosts"
type "PassiveData"
data "DisplayName" "Shared_Passive_TotemSpirit_Elk_Rage_Boosts_DisplayName"
data "Description" "Shared_Passive_TotemSpirit_Elk_Rage_Boosts_Description"
data "Properties" "IsHidden"
data "BoostConditions" "not HasHeavyArmor(context.Source)"
data "BoostContext" "OnEquip;OnCreate"
data "Boosts" " Advantage(Ability, Strength); Advantage(SavingThrow, Strength); Resistance(Slashing, Resistant); Resistance(Piercing, Resistant); Resistance(Bludgeoning, Resistant); IF(WeaponAttackRollAbility(Ability.Strength) and IsMeleeAttack() and HasDamageEffectFlag(DamageFlags.Hit)): CharacterWeaponDamage(2);"

new entry "TotemSpirit_Tiger"
type "PassiveData"
data "DisplayName" "Shared_Passive_TotemSpirit_Tiger_DisplayName"
data "Description" "Shared_Passive_TotemSpirit_Tiger_Description"
data "DescriptionParams" "Distance(4.5)"
data "Icon" "Action_Barbarian_Rage_TigerTotem"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_Rage_Totem_Tiger)"

new entry "TotemSpirit_Tiger_Rage_Boosts"
type "PassiveData"
data "DisplayName" "Shared_Passive_TotemSpirit_Tiger_Rage_Boosts_DisplayName"
data "Description" "Shared_Passive_TotemSpirit_Tiger_Rage_Boosts_Description"
data "Properties" "IsHidden"
data "BoostConditions" "not HasHeavyArmor(context.Source)"
data "BoostContext" "OnEquip;OnCreate"
data "Boosts" "Advantage(Ability, Strength); Advantage(SavingThrow, Strength); Resistance(Slashing, Resistant); Resistance(Piercing, Resistant); Resistance(Bludgeoning, Resistant);IF(WeaponAttackRollAbility(Ability.Strength) and IsMeleeAttack() and HasDamageEffectFlag(DamageFlags.Hit)): CharacterWeaponDamage(2);"

new entry "TotemSpirit_Wolf"
type "PassiveData"
data "DisplayName" "Shared_Passive_TotemSpirit_Wolf_DisplayName"
data "Description" "Shared_Passive_TotemSpirit_Wolf_Description"
data "DescriptionParams" "Distance(2)"
data "Icon" "Action_Barbarian_Rage_WolfTotem"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_Rage_Totem_Wolf)"

new entry "TotemSpirit_Wolf_Rage_Boosts"
type "PassiveData"
data "DisplayName" "Shared_Passive_TotemSpirit_Wolf_Rage_Boosts_DisplayName"
data "Description" "Shared_Passive_TotemSpirit_Wolf_Rage_Boosts_Description"
data "Properties" "IsHidden"
data "BoostConditions" "not HasHeavyArmor(context.Source)"
data "BoostContext" "OnEquip;OnCreate"
data "Boosts" "Advantage(Ability, Strength); Advantage(SavingThrow, Strength); Resistance(Slashing, Resistant); Resistance(Piercing, Resistant); Resistance(Bludgeoning, Resistant); IF(WeaponAttackRollAbility(Ability.Strength) and IsMeleeAttack() and HasDamageEffectFlag(DamageFlags.Hit)): CharacterWeaponDamage(2);"

new entry "RecklessAttack"
type "PassiveData"
data "DisplayName" "DnD_Passive_RecklessAttack_DisplayName"
data "Description" "DnD_Passive_RecklessAttack_Description"
data "Icon" "Action_Barbarian_RecklessAttack"
data "Conditions" "WeaponAttackRollAbility(Ability.Strength) and IsMeleeAttack() and not HasStatus('RECKLESS_ATTACK_BLOCK',context.Source) and HasStatus('DND_CURRENT_TURN', context.Source)"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar;Highlighted"
data "Boosts" "IF(WeaponAttackRollAbility(Ability.Strength) and IsMeleeAttack() and not HasStatus('RECKLESS_ATTACK_BLOCK',context.Source) and HasStatus('DND_CURRENT_TURN', context.Source)):Advantage(AttackRoll)"
data "StatsFunctors" "ApplyStatus(SELF,RECKLESS_ATTACK,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "RecklessAttackBlock"
type "PassiveData"
data "DisplayName" "DnD_Passive_RecklessAttack_DisplayName"
data "Description" "DnD_Passive_RecklessAttack_Description"
data "Conditions" "IsAttack() and not HasStatus('RECKLESS_ATTACK_BLOCK',context.Source) and not HasStatus('RECKLESS_ATTACK',context.Source) and HasStatus('DND_CURRENT_TURN', context.Source)"
data "Properties" "IsHidden"
data "StatsFunctors" "ApplyStatus(SELF,RECKLESS_ATTACK_BLOCK,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_GiantBadger_1"
type "PassiveData"
data "DisplayName" "DnD_Passive_Multiattack_GiantBadger_DisplayName"
data "Description" "DnD_Passive_Multiattack_GiantBadger_Description"
data "Icon" "PassiveFeature_ExtraAttack"
data "Conditions" "SpellId('Target_Claws_GiantBadger_Wildshape') and HasUseCosts('ActionPoint', true)"
data "Properties" "Highlighted"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_HELPER_1,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_GiantBadger_2"
type "PassiveData"
data "Conditions" "SpellId('Target_Bite_GiantBadger_Wildshape') and HasUseCosts('ActionPoint', true)"
data "Properties" "IsHidden"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_HELPER_2,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_Bear_Brown_1"
type "PassiveData"
data "DisplayName" "DnD_Passive_Multiattack_Bear_Brown_DisplayName"
data "Description" "DnD_Passive_Multiattack_Bear_Brown_Description"
data "Icon" "PassiveFeature_ExtraAttack"
data "Conditions" "SpellId('Target_Claws_Bear_Brown_Wildshape') and HasUseCosts('ActionPoint', true)"
data "Properties" "Highlighted"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_HELPER_1,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_Bear_Brown_2"
type "PassiveData"
data "Conditions" "SpellId('Target_Bite_Bear_Brown_Wildshape') and HasUseCosts('ActionPoint', true)"
data "Properties" "IsHidden"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_HELPER_2,100,1)"
data "StatsFunctorContext" "OnAttack"
