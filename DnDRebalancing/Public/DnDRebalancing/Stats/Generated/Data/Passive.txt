new entry "ShortResting"
type "PassiveData"
data "Properties" "IsHidden"
data "StatsFunctors" "ApplyStatus(SELF,DND_SHORT_REST,100,-1);"
data "StatsFunctorContext" "OnShortRest"

new entry "HuntersMark"
type "PassiveData"
data "DisplayName" "Shared_Passive_HuntersMark_DisplayName"
data "Description" "Shared_Passive_HuntersMark_Description"
data "DescriptionParams" "DealDamage(1d6,MainMeleeWeaponDamageType)"
data "Conditions" "HasStatus('HUNTERS_MARK',context.Target,context.Source) and IsWeaponAttack() and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "ApplyStatus(PASSIVE_HUNTERS_MARK,100,0);IF(IsAttackType(AttackType.MeleeWeaponAttack)):DealDamage(1d6, MainMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedWeaponAttack)):DealDamage(1d6, MainRangedWeaponDamageType);IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack)):DealDamage(1d6, OffhandMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedOffHandWeaponAttack)):DealDamage(1d6, OffhandRangedWeaponDamageType);"
data "StatsFunctorContext" "OnAttack"

new entry "ColossusSlayer"
type "PassiveData"
data "DisplayName" "Shared_Passive_ColossusSlayer_DisplayName"
data "Description" "Shared_Passive_ColossusSlayer_Description"
data "Conditions" "IsWeaponAttack() and HasDamageEffectFlag(DamageFlags.Hit) and not HasMaxHP()"
data "Properties" "OncePerTurn"
data "StatsFunctors" "IF(IsAttackType(AttackType.MeleeWeaponAttack)):DealDamage(1d8, MainMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedWeaponAttack)):DealDamage(1d8, MainRangedWeaponDamageType);IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack)):DealDamage(1d8, OffhandMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedOffHandWeaponAttack)):DealDamage(1d8, OffhandRangedWeaponDamageType);"
data "StatsFunctorContext" "OnDamage"

new entry "SneakAttack"
type "PassiveData"
data "DisplayName" "DnD_Passive_SneakAttack_DisplayName"
data "Description" "DnD_Passive_SneakAttack_Description"
data "DescriptionParams" "DealDamage(1d6,MainMeleeWeaponDamageType)"
data "Icon" "Action_SneakAttack_Melee"
data "Conditions" "((IsRangedAttack() and IsWeaponAttack()) or (IsAttackType(AttackType.MeleeWeaponAttack) and WieldingWeapon('Finesse', false, false, context.Source)) or (IsAttackType(AttackType.MeleeOffHandWeaponAttack) and WieldingWeapon('Finesse', true, false, context.Source))) and (HasAdvantage() or (HasAllyWithinRange('SG_Incapacitated',3) and not HasDisadvantage())) and HasDamageEffectFlag(DamageFlags.Hit) and HasActionResource('SneakAttack',1,0,false,context.Source)"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar"
data "StatsFunctors" "UseActionResource(SELF,SneakAttack,1);IF(IsAttackType(AttackType.MeleeWeaponAttack)):DealDamage(1d6, MainMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedWeaponAttack)):DealDamage(1d6, MainRangedWeaponDamageType);IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack)):DealDamage(1d6, OffhandMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedOffHandWeaponAttack)):DealDamage(1d6, OffhandRangedWeaponDamageType);"
data "StatsFunctorContext" "OnAttack"

new entry "SneakAttack_2"
type "PassiveData"
data "DisplayName" "DnD_Passive_SneakAttack_DisplayName"
data "Description" "DnD_Passive_SneakAttack_Description"
data "DescriptionParams" "DealDamage(2d6,MainMeleeWeaponDamageType)"
data "Icon" "Action_SneakAttack_Melee"
data "Conditions" "((IsRangedAttack() and IsWeaponAttack()) or (IsAttackType(AttackType.MeleeWeaponAttack) and WieldingWeapon('Finesse', false, false, context.Source)) or (IsAttackType(AttackType.MeleeOffHandWeaponAttack) and WieldingWeapon('Finesse', true, false, context.Source))) and (HasAdvantage() or (HasAllyWithinRange('SG_Incapacitated',3) and not HasDisadvantage())) and HasDamageEffectFlag(DamageFlags.Hit) and HasActionResource('SneakAttack',1,0,false,context.Source)"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar"
data "StatsFunctors" "UseActionResource(SELF,SneakAttack,1);IF(IsAttackType(AttackType.MeleeWeaponAttack)):DealDamage(2d6, MainMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedWeaponAttack)):DealDamage(2d6, MainRangedWeaponDamageType);IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack)):DealDamage(2d6, OffhandMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedOffHandWeaponAttack)):DealDamage(2d6, OffhandRangedWeaponDamageType);"
data "StatsFunctorContext" "OnAttack"

new entry "ArcaneWard"
type "PassiveData"
data "DisplayName" "Shared_Passive_ArcaneWard_DisplayName"
data "Description" "Shared_Passive_ArcaneWard_Description"
data "DescriptionParams" "RegainHitPoints(2*Level+IntelligenceModifier)"
data "Conditions" "IsSpellSchool(SpellSchool.Abjuration) and not IsCantrip()"
data "StatsFunctors" "IF(HasStatus('ARCANE_WARD_HELPER',context.Source) and SpellPowerLevelEqualTo(1)):ApplyStatus(SELF,ARCANE_WARD_REPLENISH_1,100,-1);IF(HasStatus('ARCANE_WARD_HELPER',context.Source) and SpellPowerLevelEqualTo(2)):ApplyStatus(SELF,ARCANE_WARD_REPLENISH_2,100,-1);IF(not HasStatus('ARCANE_WARD_HELPER',context.Source)):ApplyStatus(SELF,ARCANE_WARD,100,-1)"
data "StatsFunctorContext" "OnAttack"

new entry "FastHands"
type "PassiveData"
data "DisplayName" "Shared_Passive_FastHands_DisplayName"
data "Description" "Shared_Passive_FastHands_Description"
data "Boosts" "UnlockSpell(Target_Help_CunningAction);UnlockSpell(Target_Distract_CunningAction)"

new entry "SecondStoryWork"
type "PassiveData"
data "DisplayName" "Shared_Passive_SecondStoryWork_DisplayName"
data "Description" "Shared_Passive_SecondStoryWork_Description"
data "Boosts" "FallDamageMultiplier(0.5);UnlockSpell(Projectile_Jump_Thief)"

new entry "SearingSmite"
type "PassiveData"
data "DisplayName" "DnD_Passive_SearingSmite_DisplayName"
data "Description" "DnD_Passive_SearingSmite_Description"
data "DescriptionParams" "DealDamage(1d6,Fire)"
data "Conditions" "(IsAttackType(AttackType.MeleeWeaponAttack) or IsAttackType(AttackType.MeleeOffHandWeaponAttack)) and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "DealDamage(1d6,Fire);RemoveStatus(SELF,SEARING_SMITE_INITIAL);ApplyStatus(SEARING_SMITE,100,10)"
data "StatsFunctorContext" "OnAttack"
data "Properties" "IsHidden"

new entry "SearingSmite_2"
type "PassiveData"
data "DisplayName" "DnD_Passive_SearingSmite_DisplayName"
data "Description" "DnD_Passive_SearingSmite_Description"
data "DescriptionParams" "DealDamage(1d6,Fire)"
data "Conditions" "(IsAttackType(AttackType.MeleeWeaponAttack) or IsAttackType(AttackType.MeleeOffHandWeaponAttack)) and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "DealDamage(2d6,Fire);RemoveStatus(SELF,SEARING_SMITE_INITIAL_2);ApplyStatus(SEARING_SMITE,100,10)"
data "StatsFunctorContext" "OnAttack"
data "Properties" "IsHidden"
